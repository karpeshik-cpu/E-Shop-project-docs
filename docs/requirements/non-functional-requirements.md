# System Non-Functional Requirements
1. 	У магазина должен быть свой сайт, оформленный в цветах бренд-бука.  
**NFR.01.01:** Вёрстка сайта должна быть кроссбраузерной и корректно отображаться в последних двух major-версиях браузеров Chrome, Firefox, Safari, Edge с разрешением экрана от 320px (мобильные устройства) до 3840px (4K мониторы).  
**NFR.01.02:** Время полной загрузки видимой области главной страницы не должно превышать 2.5 секунды при подключении 3G.  
**NFR.01.03:** Соответствие цветового контраста элементов интерфейса (текст, кнопки, иконки) рекомендациям стандарта WCAG 2.1 (уровень AA – минимальное соотношение 4.5:1 для обычного текста).  
**NFR.01.04:** Процент успешных загрузок всех статических assets (изображения, стили, шрифты) с CDN или сервера должен составлять не менее 99.95%.

2. 	Пользователь может видеть товары, сгруппированные по разделам (бакалея, молочные продукты...).  
**NFR.02.01:** Список раздела (до 1000 карточек на страницу с пагинацией) рендерится ≤ 2 с.  
**NFR.02.02:** Корректная работа фильтров/сортировок в мобильных браузерах iOS/Android.  
**NFR.02.03:** Интерфейс навигации по разделам должен оставаться кликабельным и функциональным даже при временной недоступности бэкенда (за счёт кэширования структуры категорий на клиенте или CDN).  
**NFR.02.04:** Ошибка загрузки раздела отображается пользовательским сообщением и кнопкой «Повторить», без пустых экранов.  
**NFR.02.05:** Количество кликов для перехода из любой точки сайта в корневой раздел каталога не должно превышать 2.

3. Пользователь может видеть весь перечень товаров, участвующих в акции, и добавлять товары в корзину.  
**NFR.03.01:** Обновление списка акционных товаров на всех узлах кэширования и у клиента должно происходить не позднее чем через 1 минуту после изменения акции в админке.  
**NFR.03.02:** Коэффициент успешного выполнения операций с корзиной (добавление/удаление) должен составлять не менее 99.9%.  
**NFR.03.03:** Функциональность корзины должна быть полностью доступна при отключенном JavaScript в браузере (прогрессивное улучшение) или через API для мобильных приложений.  
**NFR.03.04:** Данные корзины должны быть привязаны к сессии пользователя и защищены от подделки межсайтовых запросов. Для авторизованных пользователей корзина должна сохраняться на сервере и синхронизироваться между устройствами.

4. Пользователь может писать отзывы на товары, которые он ранее приобретал.  
**NFR.04.01:** Возможность оставить отзыв предоставляется только после успешной авторизации и только на товары, которые были в заказах со статусом "доставлен" (проверка по истории покупок).  
**NFR.04.02:** Сервис обработки и сохранения отзывов должен быть спроектирован так, чтобы его временная недоступность (до 5 минут) не влияла на возможность просмотра каталога и оформления заказов.  
**NFR.04.03:** Загрузка формы написания отзыва и последующее её сохранение не должны блокировать основной интерфейс пользователя (должны выполняться асинхронно).  
**NFR.04.04:** Интерфейс написания отзыва должен поддерживать загрузку изображений (с предпросмотром и валидацией формата и размера) и иметь автосохранение черновика.

5. Пользователь может видеть сумму стоимости товаров в корзине с учетом скидки.  
**NFR.05.01:** Пересчёт сумм и скидок происходит ≤ 1 с при любом изменении позиции.  
**NFR.05.02:** При недоступности сервиса скидок отображается уведомление «Временно не удалось рассчитать скидку»; повтор через 30 с.  
**NFR.05.03:** Логика применения скидок и промокодов должна быть вынесена на бэкенд. Клиентская часть не должна содержать логики, определяющей валидность или размер скидки, для предотвращения манипуляций.  
**NFR.05.04:** Поддержка не менее 10 000 параллельных проверок в пике без роста p95 > 800 мс.  
**NFR.05.05:** Расчет итоговой суммы должен быть детерминированным и точным на 100%. Логика расчета (последовательность применения скидок, акций, промокодов) должна быть документирована и покрыта unit-тестами.

6. Пользователь может ввести номер дисконтной карты при оформлении заказа.  
**NFR.06.01:** Передача номера карты между клиентом, сервером и системой лояльности должна осуществляться по зашифрованным каналам (HTTPS/TLS 1.2+). Номер карты не должен храниться в логах приложения в открытом виде.  
**NFR.06.02:** Поле ввода номера карты должно поддерживать автодополнение (если данные карты есть в профиле) и маскировку ввода (например, отображение только последних 4 цифр).  
**NFR.06.03:** При недоступности системы лояльности более 3 секунд, пользователю должно быть предложено ввести карту позже или продолжить оформление без её применения, без блокировки процесса заказа.  
**NFR.06.01:** Валидация формата карты на клиенте (маска, контроль длины/проверочный алгоритм), понятные ошибки: «Номер карты не найден/не активен».

7. Пользователь может указать адрес доставки или выбрать самовывоз.  
**NFR.07.01:** Сервис геокодирования и подсказок адресов (например, при вводе "Пушкина, 12") должен обрабатывать запросы со средней задержкой не более 300 мс.  
**NFR.07.02:** При выборе доставки должен быть реализован интерактивный виджет карты (например, Яндекс.Карты или Google Maps) для точного указания места на карте.  
**NFR.07.03:** Функциональность выбора адреса должен быть доступен для использования через голосовые помощники (например, Google Assistant, Siri) в мобильных браузерах.  
**NFR.07.04:** История адресов доставки пользователя должна храниться в зашифрованном виде и быть доступной только ему и уполномоченному персоналу (курьер, менеджер заказов).

8. При выборе способа доставки пользователь видит либо режим работы пункта выдачи, либо диапазоны времени, когда может приехать курьер с заказом.  
**NFR.08.01:** Данные о доступных временных слотах для доставки должны пересчитываться в реальном времени с учётом уже оформленных, но ещё не выполненных заказов на этот временной промежуток.  
**NFR.08.02:** Запрос на получение доступных интервалов доставки должен обрабатываться не более чем за 1 секунду, даже в часы пиковой нагрузки (например, перед праздниками).  
**NFR.08.03:** В случае недоступности сервиса расчета доставки, пользователю должны быть показаны стандартные интервалы (например, "9:00-18:00") с уведомлением о необходимости уточнения у оператора.  
**NFR.08.04:** Интерфейс выбора времени доставки должен быть интуитивно понятным: отображение в виде временной шкалы, подсветка рекомендуемых слотов, невозможность выбрать прошедшее или недоступное время.  
**NFR.08.05:** Алгоритм расчета временных окон должен быть спроектирован с учетом возможности подключения множества логистических провайдеров с разными API и правилами расчёта.

